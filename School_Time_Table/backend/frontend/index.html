<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>School Timetable Calendar</title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="icon" href="./images/favicon-16x16.png" />
    <link rel="icon" href="./images/favicon-32x32.png" />
    <link rel="apple-touch-icon" href="./images/apple-touch-icon.png" />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>ðŸ“… School Timetable</h1>

        <!-- Filters -->
        <div class="filters">
          <select id="weekSelector">
            <option value="1">Week 1</option>
            <option value="2">Week 2</option>
            <option value="3">Week 3</option>
            <option value="4">Week 4</option>
          </select>

          <select id="classroomFilter">
            <option value="">Select Classroom</option>
            <option value="1A">Grade 1A</option>
            <option value="1B">Grade 1B</option>
            <!-- Add all 24 classrooms -->
          </select>

          <select id="teacherFilter">
            <option value="">Select Teacher</option>
            <!-- Will be populated from API -->
          </select>

          <button id="loadSchedule">Load Schedule</button>
          <button id="addSchedule">Add New Schedule</button>
          <button id="populateSchedule">Populate Timetable</button>
          <button id="shuffleTimetable">Shuffle Timetable</button>

          <button id="clearSchedules" style="background: #faa">
            Clear All Schedules
          </button>
        </div>
      </header>
      <div
        id="loader"
        style="
          display: none;
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          z-index: 9999;
          background: rgba(255, 255, 255, 0.7);
          justify-content: center;
          align-items: center;
        "
      >
        <div
          style="
            padding: 20px;
            font-size: 2em;
            font-weight: bold;
            color: #1a73e8;
          "
        >
          Loading...
          <span class="loader-spinner" style="margin-left: 10px">
            <svg width="32" height="32" viewBox="0 0 50 50">
              <circle
                cx="25"
                cy="25"
                r="20"
                fill="none"
                stroke="#1a73e8"
                stroke-width="4"
                stroke-dasharray="100"
                stroke-dashoffset="60"
              >
                <animateTransform
                  attributeName="transform"
                  type="rotate"
                  from="0 25 25"
                  to="360 25 25"
                  dur="1s"
                  repeatCount="indefinite"
                />
              </circle>
            </svg>
          </span>
        </div>
      </div>

      <!-- Timetable Grid -->
      <div class="timetable">
        <table id="scheduleTable">
          <thead>
            <tr>
              <th>Time</th>
              <th>Monday</th>
              <th>Tuesday</th>
              <th>Wednesday</th>
              <th>Thursday</th>
              <th>Friday</th>
            </tr>
          </thead>
          <tbody id="scheduleBody">
            <!-- Time slots will be generated here -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- Add/Edit Schedule Modal -->
    <div id="scheduleModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Add Schedule</h2>
        <form id="scheduleForm">
          <label>Teacher:</label>
          <select id="teacherId" required></select>

          <label>Course:</label>
          <select id="courseId" required></select>

          <label for="grade">Grade</label>
          <select id="grade" name="grade" required>
            <option value="">Select Grade</option>
            <!-- Populate options dynamically from teacher/classroom info -->
            <!-- ...and so on up to 4c -->
          </select>

          <!-- Only shown for joint teaching courses: -->
          <div id="jointTeacherContainer" style="display: none">
            <label for="jointTeacherId">Joint Teacher (Optional):</label>
            <select id="jointTeacherId">
              <option value="">Select Joint Teacher</option>
            </select>
          </div>

          <label>Classroom:</label>
          <select id="classroomId" required></select>

          <label>Day:</label>
          <select id="dayOfWeek" required>
            <option value="monday">Monday</option>
            <option value="tuesday">Tuesday</option>
            <option value="wednesday">Wednesday</option>
            <option value="thursday">Thursday</option>
            <option value="friday">Friday</option>
          </select>

          <label>Start Time:</label>
          <input type="time" id="startTime" required />

          <label>End Time:</label>
          <input type="time" id="endTime" required />

          <button type="submit">Save Schedule</button>
        </form>
      </div>
    </div>


    <div
      id="schedule-tooltip"
      style="
        display: none;
        position: absolute;
        z-index: 9999;
        background: #222;
        color: #fff;
        padding: 8px 10px;
        border-radius: 5px;
        font-size: 1rem;
        pointer-events: none;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      "
    ></div>
    
        <script src="js/app.js"></script>
  </body>
</html>


